<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Badminton Single Score Counter</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="w-full max-w-md bg-white rounded-2xl shadow-lg p-4">
    <!-- Header Score -->
    <div class="flex justify-between items-center mb-2">
      <div class="text-center w-1/3">
        <p class="text-sm text-gray-500">Player 1</p>
        <p id="score1" class="text-5xl font-bold">0</p>
        <p id="set1" class="text-xs mt-1">Set: 0</p>
      </div>
      <div class="text-center">
        <p class="text-xs text-gray-500">SET</p>
        <div class="flex gap-1 justify-center text-sm">
          <span id="set-ind-1" class="px-2 py-1 rounded bg-blue-500 text-white">1</span>
          <span id="set-ind-2" class="px-2 py-1 rounded bg-gray-200">2</span>
          <span id="set-ind-3" class="px-2 py-1 rounded bg-gray-200">3</span>
        </div>
      </div>
      <div class="text-center w-1/3">
        <p class="text-sm text-gray-500">Player 2</p>
        <p id="score2" class="text-5xl font-bold">0</p>
        <p id="set2" class="text-xs mt-1">Set: 0</p>
      </div>
    </div>

    <!-- Service Court -->
    <div class="grid grid-cols-2 gap-2 mb-4">
      <div id="p1-left" class="h-24 rounded-lg bg-gray-200 flex items-center justify-center text-sm">P1 Kiri</div>
      <div id="p1-right" class="h-24 rounded-lg bg-gray-200 flex items-center justify-center text-sm">P1 Kanan</div>
      <div id="p2-left" class="h-24 rounded-lg bg-gray-200 flex items-center justify-center text-sm">P2 Kiri</div>
      <div id="p2-right" class="h-24 rounded-lg bg-gray-200 flex items-center justify-center text-sm">P2 Kanan</div>
    </div>

    <!-- Buttons -->
    <div class="grid grid-cols-2 gap-3">
      <button onclick="addPoint(1)" class="bg-blue-600 text-white py-2 rounded-lg">Point Player 1</button>
      <button onclick="addPoint(2)" class="bg-green-600 text-white py-2 rounded-lg">Point Player 2</button>
    </div>

    <button onclick="resetGame()" class="mt-3 w-full bg-red-500 text-white py-2 rounded-lg">Reset Match</button>
  </div>

<script>
  let score1 = 0;
  let score2 = 0;
  let set1 = 0;
  let set2 = 0;
  let currentSet = 1;
  let server = 1;

  function updateSetIndicator() {
    for (let i = 1; i <= 3; i++) {
      const el = document.getElementById('set-ind-' + i);
      el.className = 'px-2 py-1 rounded ' + (i === currentSet ? 'bg-blue-500 text-white' : 'bg-gray-200');
    }
  }

  function updateUI() {
    document.getElementById('score1').innerText = score1;
    document.getElementById('score2').innerText = score2;
    document.getElementById('set1').innerText = 'Set: ' + set1;
    document.getElementById('set2').innerText = 'Set: ' + set2;
    updateSetIndicator();

    ['p1-left','p1-right','p2-left','p2-right'].forEach(id => {
      document.getElementById(id).className = 'h-24 rounded-lg bg-gray-200 flex items-center justify-center text-sm';
    });

    if (server === 1) {
      const box = (score1 % 2 === 0) ? 'p1-right' : 'p1-left';
      document.getElementById(box).classList.add('bg-blue-200','font-bold');
    } else {
      const box = (score2 % 2 === 0) ? 'p2-right' : 'p2-left';
      document.getElementById(box).classList.add('bg-green-200','font-bold');
    }
  }

  function checkSetWinner() {
    if ((score1 >= 21 || score2 >= 21) && Math.abs(score1 - score2) >= 2 || score1 === 30 || score2 === 30) {
      if (score1 > score2) {
        set1++;
        server = 1;
      } else {
        set2++;
        server = 2;
      }
      score1 = 0;
      score2 = 0;
      currentSet++;

      if (set1 === 2 || set2 === 2) {
        alert('Match selesai! ' + (set1 === 2 ? 'Player 1 menang' : 'Player 2 menang'));
        resetGame();
      }
    }
  }

  function addPoint(player) {
    if (player === 1) {
      score1++;
      server = 1;
    } else {
      score2++;
      server = 2;
    }
    checkSetWinner();
    updateUI();
  }

  function resetGame() {
    score1 = 0;
    score2 = 0;
    set1 = 0;
    set2 = 0;
    currentSet = 1;
    server = 1;
    updateUI();
  }

  updateUI();
</script>

</body>
</html>